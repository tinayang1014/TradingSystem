
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Python Flask Bucket List App</title>

    <link href="http://getbootstrap.com/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet">


    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800">
    <link rel='stylesheet' href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
 
    <!-- <link href="http://getbootstrap.com/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet"> -->
    <link href="../static/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/signin.css') }}">
    <script src = "jquery-4.1.3.js"></script>
    <script src="../static/js/plotly.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

   
  </head>

  <body>

    <div class="container">

      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
          <a class="navbar-brand" >CryptoTrading</a>
            <!--Add here -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
        <span class="navbar-toggler-icon"></span>
        </button>
        <!--Add here -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/index">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/trade">Trade</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/signUp">Log Out</a>
                    </li>
                </ul>
            </div>
        </nav>
          

    <h2>CUSTOMER_PROFOLIO</h2>
    <h2>Hello, {{ userName }} </h2>
    <br>
    <br>
    <br>
    Cash Balance: <table>{{cashBalance}}</table>
    <br>
    <table class="table table-hover">
      Currency Balence: 
      <!-- example: [('ETH-USD', 2, 107.5, 108.738), ('BTC-USD', 1, 3846.47, 3869.97), ('LTC-USD', 6, 30.6437, 30.452)] -->
      {{updated_price}}
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Total_Quantity</th>
          <th>Ajusted Cost</th>
          <th>Market Values</th>
          <th>UP/L</th>
          <th>RP/L</th>
        </tr>
      </thead>
      <tbody>
        {% for c in portfolio_balance %}
        <tr>
          <td>{{c[1]}}</td>
          <td>{{c[2]}}</td>
          <td>{{c[3]}}</td>
          <td>{{updated_price[c[0]]*c[2]}}</td>
          <td>{{updated_price[c[0]]*c[2]-c[2]*c[3]}}</td>
          <td>{{c[4]}}</td>

        </tr>
        {% endfor %}
      </tbody>
    </table>

 
    <div class="navbar"><span>Real-Time Chart with Plotly.js</span></div>
      <div class="wrapper">
        <div id="piechart"></div>

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        
        <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        
        // Draw the chart and set the chart values
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
          ['Cryto', 'Holdings'],
          ['BTC', 8],
          ['LTC', 2],
          ['ETH', 4],

        ]);
        
          // Optional; add a title and set the width and height of the chart
          var options = {'title':'Equity Distribution', 'width':550, 'height':400};
        
          // Display the chart inside the <div> element with id="piechart"
          var chart = new google.visualization.PieChart(document.getElementById('piechart'));
          chart.draw(data, options);
        }
        </script>
      </div>

      
    <figcaption class="figure-caption text-center">Crypto Portfolio</figcaption>
    

    

    <table class = 'table table-hover'>
      Trading History:
      <!-- example: [('LTC-USD', 'Buy', 1, 30.73, datetime.datetime(2018, 12, 3, 18, 25, 42), None), ('BTC-USD', 'Sell', 1, 3857.98, datetime.datetime(2018, 12, 3, 18, 27, 56), 4.0), ('ETH-USD', 'Sell', 3, 107.85, datetime.datetime(2018, 12, 3, 18, 29, 16), 0.57), ('LTC-USD', 'Buy', 1, 30.37, datetime.datetime(2018, 12, 3, 19, 16, 30), None), ('LTC-USD', 'Buy', 1, 30.46, datetime.datetime(2018, 12, 3, 19, 21, 54), None)] -->
      <thead>
        <tr>
            <th>Symbol</th>
            <th>Side</th>
            <th>Qty</th>
            <th>Timestamp</th>
            <th>Cost</th>
            <th>RP/L</th>
        </tr>
      </thead>
      {% for transaction in trans_history %}
      <tr>
          <td>{{transaction[0]}}</td>
          <td>{{transaction[1]}}</td>
          <td>{{transaction[2]}}</td>
          <td>{{transaction[4]}}</td>
          <td>{{transaction[3]}}</td>
          <td>{{transaction[5]}}</td>
      </tr>
      {% endfor %}
      </table>


      

      <div class="navbar"><span>Real-Time Chart with Plotly.js</span></div>
      <div class="wrapper">
        <div id="chart"></div>
        <script>
         
            
            function getData() {
                return Math.random();
            }
            Plotly.plot('chart', [{
                y: [getData()],
                type: 'line'
            }]);

            var cnt = 0;
            setInterval(function() {
                Plotly.extendTraces('chart', {
                    y: [
                        [getData()]
                    ]
                }, [0]);
                cnt++;
                if (cnt > 500) {
                    Plotly.relayout('chart', {
                        xaxis: {
                            range: [cnt - 500, cnt]
                          }
                      });
                   }
                }, 15);
        </script>
      </div>
        
      
      <figcaption class="figure-caption text-center">A caption for the above image.</figcaption>
      
        


      <footer class="footer">
        <p>&copy; Company 2018</p>
      </footer>
  </div>
  </div>
 
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="js/mdb.min.js"></script>
  </body>
</html>

